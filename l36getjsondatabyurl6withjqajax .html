<!DOCTYPE html>
<html>
    <head>
        <title>SpaceXdata API From URL 6 with jQuery Ajax</title>
        <style type="text/css">
            body{
                height: 100vh;

                display: flex;
                justify-content: center;
                align-items: center;
            }

            .container{
                width: 300px;
                background-color: #f4f4f4;
                padding:10px;
            }
        </style>
    </head>
    <body>

        <div class="container">
            <div id="display"></div>
            <button type="button" id="btn">Load Data</button>
        </div>

        <script src="https://code.jquery.com/jquery-3.7.1.min.js" type="text/javascript"></script>
        
        <script type="text/javascript">

            var getdisplay = document.getElementById("display");
            var getbtn = document.getElementById("btn");

            getbtn.addEventListener("click",function(){
                var url = `https://api.spacexdata.com/v3/launches?`;
                // $.get(url,loaddata);
                $.getJSON(url,loaddata);
            });

            // function loaddata(){
            //     var xmlhttp = new XMLHttpRequest;
            //     var url = `https://api.chucknorris.io/jokes/random`;

            //     xmlhttp.onreadystatechange = function(){
            //         if(this.readyState === 4){

            //             if(this.status === 200){

            //                 var result = xmlhttp.responseText;

            //                 result = JSON.parse(result);
            //                 console.log(result);

            //                 var html = `
            //                     <img src="result.icon_url" />
            //                     <h3> ${result.value} </h3>
                            
            //                 `;

            //                 getdisplay.innerHTML =  html;
            //             }
            //         }
            //     }

            //     // console.log(xmlhttp);

            //     xmlhttp.onprogress = function(){
            //         console.log("ON PROGRESS = ",xmlhttp.readyState,xmlhttp.status);
            //     };

            //     xmlhttp.onload = function(){
            //         console.log("ON LOAD = " , xmlhttp.readyState,xmlhttp.status);
            //     };

            //     xmlhttp.open("GET",url,true);
            //     xmlhttp.send();
            // }


            // function loaddata(){
            //     var url = `https://api.chucknorris.io/jokes/random`;
            //     fetch(url).then(function(response){
            //         return response.json();
            //     }).then(function(data){
            //         console.log(data);
            //         var html = `
            //         <img src="data.icon_url" />
            //         <h3>${data.value}</h3>
            //         `;

            //         getdisplay.innerHTML = html;
            //     }).catch(function(err){
            //         console.log(err);
            //     });
            // }

        

            // function loaddata(){
                
            //     var url = `https://api.chucknorris.io/jokes/random`;

            //     $.ajax({
            //         method:"GET",
            //         url:url,
            //         dataType:'json'
            //     }).done((data)=>{
            //         console.log(data);

            //         var html = `
            //         <img src="${data.icon_rul}" />
            //         <h3> ${data.value} </h3>
            //         `;

            //         
            //     }).fail(()=>{
            //         console.log('Error');
            //     });
            // }




            function loaddata(data){
                // console.log(data);
                let html;

// looping by js
                // data.forEach((val,idx)=>{
                //     console.log(val);

                //     html += `
                //     <ul>
                //         <li> Flight Number = ${val.flight_number} </li>
                //         <li> Mission Name = ${val.mission_name} </li>
                //         <li> Launch Year = ${val.launch_year} </li>
                //     </ul>
                // `;


                // html += `
                //     <ul>
                //         <li> Flight Number = ${data[idx].flight_number} </li>
                //         <li> Mission Name = ${data[idx].mission_name} </li>
                //         <li> Launch Year = ${data[idx].launch_year} </li>
                //     </ul>
                // `;

                // });



// looping by jQuery 
                    $.each(data,function(idx,val){
                            // html += `
                            //         <ul>
                            //             <li> Flight Number = ${val.flight_number} </li>
                            //             <li> Mission Name = ${val.mission_name} </li>
                            //             <li> Launch Year = ${val.launch_year} </li>
                            //         </ul>
                            //     `;


                                html += `
                                        <ul>
                                            <li> Flight Number = ${data[idx].flight_number} </li>
                                            <li> Mission Name = ${data[idx].mission_name} </li>
                                            <li> Launch Year = ${data[idx].launch_year} </li>
                                        </ul>
                                    `;

                    });

                getdisplay.innerHTML = html;
            }
            


        </script>
    </body>
</html>

<!-- chucknorris.io -->
